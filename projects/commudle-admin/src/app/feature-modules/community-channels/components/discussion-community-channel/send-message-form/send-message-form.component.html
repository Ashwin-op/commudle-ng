
<div class="send-message-form">
  <div *ngIf="uploadedFiles.length > 0" class="attachments {{attachmentDisplay}}">
    <div class="file" *ngFor="let file of uploadedAttachementFiles; let i=index;">
      <div class="remove clickable" (click)="removeFile(i)">
        <nb-icon status="danger" icon="close-circle"></nb-icon>
      </div>
      <div class="file-preview" *ngIf="!file.file.type.includes('image')">
        <p class="name">
          <small>
            {{file.file.name | slice:0:10 }}
          </small>
        </p>
        <p class="extension">
          <small>
            {{file.file.name.split('.').reverse()[0]}}
          </small>
        </p>
      </div>
      <div class="image-file-preview" *ngIf="file.file.type.includes('image')">
        <img src="{{uploadedFiles[i]}}" alt="{{ file.file.name }}">
      </div>
    </div>
  </div>

  <form (ngSubmit)="emitMessage()" (keyup.enter)="emitMessage()" [formGroup]="sendUserMessageForm">
    <textarea
    nbInput
    fullWidth
    formControlName="content"
    placeholder="Add a Comment (max 200 characters)"
    rows="1"
    #inputElement
    >
    </textarea>
   <div>
     <label class="clickable">
       <nb-icon icon="attach"></nb-icon>
       <input type="file" nbInput fullWidth class="hidden" multiple (change)="addFiles($event)" #fileInput>
     </label>
   </div>
   <button [disabled]="!sendUserMessageForm.valid || disabled" type="submit" nbButton ghost fullWidth ghost status="info">
     <nb-icon icon="corner-down-left-outline"></nb-icon>
   </button>
  </form>
</div>
